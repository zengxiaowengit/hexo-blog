---
title: 数据库表JOIN原理
date: 2018-01-26 09:41:16
tags:
	- 数据库
---

## 笛卡尔积

	笛卡尔积的概念：将两个集合中的所有元素一一组合，得到一个 M*N 大小的新集合。
	对应到数据库操作上，笛卡尔积就是把两个表全连接起来。
	举个例子，两个表A, B。分别有100，10000条记录。
	如果做笛卡尔积，会组合100 * 10000次。产生这么多条记录。 

## Simple Nested-Loop Join
	
	简单的嵌套循环。其实就是两个for循环，以其中一个表作为驱动表，另一个表作为被驱动表，去做关联比较。
	伪代码如下：
```kotlin
	for row1 in t1
        for row2 in t2
            if row2 match row1 //row2与row1匹配，满足连接条件
                join row1 and row2 into result //连接row1和row2加入结果集
```
	如上面的例子，如果两个表以某个条件关联做JOIN操作，比较次数为100 * 10000。
	但是从计算机的存取来讲，需要考虑到磁盘的存取次数。这部分是影响性能的关键。根据性能优化的
	实际数据库比较的时候肯定不是每次取一条，比较，然后再取一条。这个只是基本的算法思路。

## Block Nested-Loop Join
	
	区块嵌套循环是简单嵌套循环的一种优化。
	优化思路是：一次读取多条驱动表的记录出来，去和被驱动表做匹配，可以减少IO的读取次数。
	例如：以A表作为驱动表，	
	
## Index Nested-Loop Join
	
	

## LEFT JOIN
	
	左连接。以左表作为

## RIGHT JOIN

	

## INNER JOIN

	






